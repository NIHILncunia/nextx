# nextx

`nextx`는 Next.js (App Router) 프로젝트의 초기 파일 구조 생성을 돕는 간단하고 규격화된 CLI 도구입니다.

이 도구는 일관된 프로젝트 구조와 규칙을 따라 페이지, API 라우트, 데이터 엔티티의 보일러플레이트 코드를 빠르게 생성할 수 있도록 도와줍니다.

## 설치

`nextx`를 전역으로 사용하려면 npm 또는 pnpm을 통해 설치하세요:

```bash
npm install -g @NIHILncunia/nextx
# 또는
pnpm add -g @NIHILncunia/nextx
```

**참고**: `nextx`는 현재 디렉토리, 상위 디렉토리, 또는 pnpm 모노레포 작업 공간 내에서 Next.js 프로젝트(`next.config.js`가 있는 위치)를 자동으로 찾습니다. 특정 경로를 지정하고 싶다면 설정 파일을 사용할 수 있습니다.

---

## 설정 (Configuration)

`nextx`는 별도의 설정 없이도 바로 사용할 수 있지만, 설정 파일을 통해 프로젝트 구조에 맞게 기본 동작을 상세하게 설정할 수 있습니다.

### 설정 파일

프로젝트 루트에 `nextx.config.ts`, `nextx.config.js`, 또는 `nextx.config.json` 파일을 생성하여 각 생성물의 기본 경로를 재정의할 수 있습니다. CLI는 `.ts`, `.js`, `.json` 순서로 파일을 탐색합니다.

**`nextx.config.ts` 예시 (권장):**

```typescript
// nextx.config.ts
export default {
  lang: 'ko', // 'ko' | 'en' | 'jp'
  aliases: {
    app: "src/app",
    entities: "src/core/entities"
  }
};
```

**`nextx.config.json` 예시:**

```json
{
  "lang": "ko",
  "aliases": {
    "app": "src/app",
    "entities": "src/core/entities"
  }
}
```

**옵션:**

-   `lang`: CLI 메시지 언어를 설정합니다. (`ko`, `en`, `jp` 지원) 기본값은 `"ko"` 입니다.
-   `aliases.app`: Next.js의 `app` 디렉토리 경로를 지정합니다. 기본값은 `"app"` 입니다.
-   `aliases.entities`: `entity` 명령어로 생성되는 파일들의 루트 경로를 지정합니다. 기본값은 `"app/_entities"` 입니다.

### 모노레포(Monorepo) 지원

-   **자동 감지**: 설정 파일이 없는 경우, `nextx`는 `pnpm-workspace.yaml` 파일의 존재 여부를 확인하여 자동으로 pnpm 모노레포 구조를 감지합니다.
-   **자동 경로 탐색**: 모노레포 환경이 감지되면, `pnpm-workspace.yaml`에 정의된 패키지 경로(`apps/*`, `packages/*` 등)를 순회하며 `next.config.js`가 있는 Next.js 프로젝트를 자동으로 찾아냅니다.
-   따라서, 모노레포의 루트 디렉토리나 하위 패키지 디렉토리 등 어디에서 `nextx` 명령어를 실행하더라도, CLI는 올바른 Next.js 프로젝트에 파일을 생성합니다.

---

## 사용법

### `nextx page`

(내용 생략)

### `nextx api`

(내용 생략)

### `nextx entity`

(내용 생략)

### `nextx config`

`nextx`의 설정을 확인하거나 변경합니다.

**형식**
```
nextx config <get|set> <key> [value]
```

-   `get <key>`: 현재 설정 값을 확인합니다.
-   `set <key> <value>`: 설정 값을 변경합니다. 이 명령어는 `nextx.config.json` 파일만 수정할 수 있습니다.

현재 지원되는 `<key>`는 `lang` 뿐입니다.

**예시**
```bash
# 현재 설정된 언어 확인
$ nextx config get lang
lang: ko

# 언어를 영어로 변경
$ nextx config set lang en
✅ Configuration changed successfully: lang = en
```

---

# nextx (English)

A simple and opinionated CLI for scaffolding Next.js (App Router) projects.

This tool helps you quickly generate boilerplate code for pages, API routes, and data entities, following a consistent project structure and conventions.

## Installation

(Omitted for brevity)

---

## Configuration

While `nextx` works out-of-the-box with no configuration, you can create a configuration file to customize its behavior for your project structure.

### Configuration File

You can override the default paths for generated files by creating a `nextx.config.ts`, `nextx.config.js`, or `nextx.config.json` file in your project root. The CLI will search for them in that order.

**`nextx.config.ts` Example (Recommended):**

```typescript
// nextx.config.ts
export default {
  lang: 'en', // 'ko' | 'en' | 'jp'
  aliases: {
    app: "src/app",
    entities: "src/core/entities"
  }
};
```

**`nextx.config.json` Example:**

```json
{
  "lang": "en",
  "aliases": {
    "app": "src/app",
    "entities": "src/core/entities"
  }
}
```

**Options:**

-   `lang`: Sets the CLI message language. (Supports `ko`, `en`, `jp`) Default: `"ko"`.
-   `aliases.app`: Specifies the path to the Next.js `app` directory. Default: `"app"`.
-   `aliases.entities`: Specifies the root path for files generated by the `entity` command. Default: `"app/_entities"`.

### Monorepo Support

(Omitted for brevity)

---

## Usage

### `nextx page`

(Omitted for brevity)

### `nextx api`

(Omitted for brevity)

### `nextx entity`

(Omitted for brevity)

### `nextx config`

Checks or modifies the `nextx` configuration.

**Syntax**
```
nextx config <get|set> <key> [value]
```

-   `get <key>`: Checks the current value of a setting.
-   `set <key> <value>`: Changes the value of a setting. This command can only modify `nextx.config.json` files.

Currently, the only supported `<key>` is `lang`.

**Examples**
```bash
# Check the currently configured language
$ nextx config get lang
lang: ko

# Change the language to English
$ nextx config set lang en
✅ Configuration changed successfully: lang = en
```

---

## License

MIT
